generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum OnboardEnum {
  NEW
  INITIATED
  PHONE_VERIFIED
  SET_PASSCODE
  SET_PIN
  KYB_STARTED
  KYB_SUBMITTED
  KYB_APPROVED
  KYB_FAILED
  COMPLETED
}

model User {
  id                 String               @id @default(cuid())
  email              String               @unique
  firstName          String?
  lastName           String?
  otherName          String?
  password           String?
  passcode           String?
  pin                String?
  onboarding         OnboardEnum          @default(NEW)
  accounts           Account[]
  kyb                Kyb[]
  token              String?
  otp                String?
  createdAt          DateTime             @default(now())
  updatedAt          DateTime             @updatedAt
  ResidentialAddress ResidentialAddress[]
  BusinessAddress    BusinessDetails[]

  @@map("users")
}

model Account {
  id            String   @id @default(uuid())
  cusomterId    String
  accountNumber String   @unique
  user          User     @relation(fields: [userId], references: [id])
  userId        String
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt

  @@map("accounts")
}

model ResidentialAddress {
  id        String   @id @default(uuid())
  user      User     @relation(fields: [userId], references: [id])
  userId    String   @unique
  address   String
  city      String
  state     String
  zipcode   String
  landmark  String
  lga       String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("residential_addresses")
}

model BusinessDetails {
  id                String   @id @default(uuid())
  user              User     @relation(fields: [userId], references: [id])
  userId            String   @unique
  businessName      String?
  industry          String?
  size              String?
  income            String?
  address           String?
  city              String?
  state             String?
  zipcode           String?
  landmark          String?
  lga               String?
  directorFirstName String?
  directorLastName  String?
  directorEmail     String?
  directorPhone     String?
  directorIdType    String?
  directorIdNumber  String?
  directorIdImage   String?  @db.Text
  cacNumber         String?
  cacdoc            String?
  moiDoc            String?  @db.Text
  scumlDoc          String?  @db.Text
  utilityBill       String?  @db.Text
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  @@map("business_details")
}

model Kyb {
  id                       String   @id @default(uuid())
  user                     User     @relation(fields: [userId], references: [id])
  userId                   String   @unique
  nationalityStatus        Boolean  @default(false)
  faceVerifyStatus         Boolean  @default(false)
  ninStatus                Boolean  @default(false)
  tinStatus                Boolean  @default(false)
  bvnStatus                Boolean  @default(false)
  residentialAddressStatus Boolean  @default(false)
  businessAddressStatus    Boolean  @default(false)
  businessDetailsStatus    Boolean  @default(false)
  businessDocumentStatus   Boolean  @default(false)
  attestation              Boolean  @default(false)
  createdAt                DateTime @default(now())
  updatedAt                DateTime @updatedAt

  @@map("kybs")
}
